@model Darek_kancelaria.Models.Cases

    <div class="ContentPadTop">
        <h4>Dane sprawy klienta @Model.personelModel.Name <span class="mainColor"> @Model.personelModel.FName</span></h4>
        <hr />
        <div class="row" style="margin-top: -25px;">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-6">
                        <h1>@Model.Case.Type</h1>
                        <h5>dodano: <span class="mainColor">@Model.Case.AddDate</span> </h5>
                        @{
                            if (!String.IsNullOrEmpty(Model.Case.ActSignature))
                            {
                                var parts = Model.Case.ActSignature.Split(' ');
                                if (parts.Count() == 3)
                                {
                                    <h4 class="hidden-sm hidden-xs">Wydział: <span class="mainColor">@parts[0]</span></h4>
                                    <h4 class="hidden-sm hidden-xs">Rodzaj: <span class="mainColor">@parts[1]</span></h4>
                                    var num = parts[2].Split('/');
                                    <h4 class="hidden-sm hidden-xs">Numer: <span class="mainColor">@num[0]</span></h4>
                                    <h4 class="hidden-sm hidden-xs">Założona w roku: <span class="mainColor">@DateTime.Now.Year.ToString().Substring(0, 2)@num[1]</span></h4>
                                }
                                if (parts.Count() == 4)
                                {
                                    <h4 class="hidden-sm hidden-xs">Wydział: <span class="mainColor">@parts[0]</span></h4>
                                    <h4 class="hidden-sm hidden-xs">Sekcja: <span class="mainColor">@parts[1]</span></h4>
                                    <h4 class="hidden-sm hidden-xs">Rodzaj: <span class="mainColor">@parts[2]</span></h4>
                                    var num = parts[3].Split('/');
                                    <h4 class="hidden-sm hidden-xs">Numer: <span class="mainColor">@num[0]</span></h4>
                                    <h4 class="hidden-sm hidden-xs">Założona w roku: <span class="mainColor">@DateTime.Now.Year.ToString().Substring(0, 2)@num[1]</span></h4>
                                }
                            }
                        }
                    </div>
                    <div class="col-md-6 text-right">
                        <h4>Sygnatura akt: <span style="color:#923233">@Model.Case.ActSignature</span></h4>
                        <h4>Instancja: <span class="mainColor">@Model.Case.Instance</span></h4>
                        <h4>Należność: <span class="mainColor">@Model.Case.Price.Sum(x => x.Cash) zł</span></h4>
                        @if (Model.Case.Status)
                        {
                            <h4>Status: <span class="mainColor">ZAMKNIĘTA</span></h4>
                        }
                        else
                        {
                            <h4>Status: <span class="mainColor">W TOKU</span></h4>
                        }
                        @if (!Model.Case.Status)
                        {
                            <input id="closeCase" type="button" value="ZAMKNIJ SPRAWĘ" class="btnStyle" style="width:auto; line-height:20px;" />
                        }
                        else
                        {
                            <input id="openCase" type="button" value="OTWÓRZ SPRAWĘ" class="btnStyle" style="width:auto; line-height:20px;" />
                        }
                    </div>
                </div>
            </div>
        </div>
        @if (Model.Case.Status)
        {
        <div class="row">
            <div class="col-md-12">
                <h4 style="margin-top:20px;">Wynik postępowania </h4>
                <hr />
                <div class="col-md-12">
                    @Model.Case.Result
                </div>
            </div>
        </div>
        }
        <div class="row">
            <div class="col-md-8">
                <h4 style="margin-top:20px;">Dokumenty <span>( liczba dokumentów:  <span class="mainColor">@Model.Case.DocumentsModels.Count()</span> )</span> </h4>
                <hr />
                <div class="row">
                    @if (@Model.Case.DocumentsModels.Count() == 0)
                    {
                        <div class="col-md-12 text-center text-danger">
                            <h4>Brak dokumentów</h4>
                        </div>
                    }
                    else
                    {
                        <table>
                            @foreach (var z in Model.Case.DocumentsModels)
                            {
                                <tr>
                                    <td>
                                        @z.Name
                                    </td>
                                    <td>
                                        @z.Ext
                                    </td>
                                    <td>
                                        @z.Added
                                    </td>
                                </tr>
                            }
                        </table>
                    }
                    <div class="row">
                        <div class="col-md-6 text-right">
                            @if (!Model.Case.Status)
                            {
                                <input type="button" value="PRZEŚLIJ DOKUMENT" class="btnStyle" style="width:auto; margin-top:20px;" />
                            }
                        </div>
                        <div class="col-md-6 text-left">
                            @if (!Model.Case.Status)
                            {
                                <input type="button" class="btnStyle" value="DODAJ DOKUMENT" style="width:auto; margin-top:20px;" />
                            }
                        </div>
                    </div>
                </div>
                <h4 style="margin-top:20px;">Dowody <span>( liczba dowodów:  <span class="mainColor">@Model.Case.EvidenceModels.Count()</span> )</span> </h4>
                <hr />
                <div class="row">
                    @if (@Model.Case.EvidenceModels.Count() == 0)
                    {
                        <div class="col-md-12 text-center text-danger">
                            <h4>Brak dowodów</h4>
                        </div>
                    }
                    else
                    {

                    }
                <div class="text-center">
                    @if (!Model.Case.Status)
                    {<input type="button" class="btnStyle" value="PRZEŚLIJ DOWÓD" style="width:auto; margin-top:20px;" />}

                </div>
                </div>
            </div>
            <div class="col-md-4">
                <h4 style="margin-top:20px;">Terminy <span>( liczba wydarzeń  <span class="mainColor">@Model.Case.Terms.Count()</span> )</span> </h4>
                <hr />
                <div class="row">
                    @if (@Model.Case.Terms.Count() == 0)
                    {
                        <div class="col-md-12 text-center text-danger">
                            <h4>Brak wydarzeń</h4>
                        </div>
                    }
                    else
                    {
                        <div class="col-md-12">
                            <table style="width: 100%">
                                <tbody>
                                    @foreach (var z in Model.Case.Terms)
                                    {
                                        if (z.Term < DateTime.Now)
                                        {
                                            <tr class="clientRow" >
                                                <td class="clientField" style="color:#923233; text-decoration:line-through">
                                                    @z.Name
                                                </td>
                                                <td class="clientField text-right" style="color:#923233; text-decoration:line-through">
                                                    @z.Term.ToString("dd/MM/yyyy HH:mm")
                                                </td>
                                            </tr>
                                        }
                                        else
                                        {
                                            <tr class="clientRow">
                                                <td class="clientField">
                                                    @z.Name
                                                </td>
                                                <td class="clientField text-right">
                                                    @z.Term.ToString("dd/MM/yyyy hh:mm")
                                                </td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                <div class="text-center">
                    @if (!Model.Case.Status)
                    {
                        <input type="button" class="btnStyle" value="DODAJ WYDARZENIE" style="width:auto; margin-top:20px;" />
                    }
                </div>
                </div>
                <h4 style="margin-top:20px;">Finanse <span>( zapłacono:  <span class="mainColor">@Model.Case.Price.Sum(x => x.Cash) zł</span> )</span> </h4>
                <hr />
                <div class="row">
                    @if (@Model.Case.Price.Count() == 0)
                    {
                        <div class="col-md-12 text-center text-danger">
                            <h4>Brak odnotowanych płatności</h4>
                        </div>
                    }
                    else
                    {
                <div class="col-md-12">
                    <table style="width: 100%">
                        <tbody>
                            @foreach (var z in Model.Case.Price)
                            {

                            <tr class="clientRow">
                                <td class="clientField">
                                    @z.ServiceName
                                </td>
                                <td class="clientField text-right">
                                    @z.Cash zł
                                </td>
                                <td class="clientField text-right" style="color:#923233; width:auto;">
                                    <a>DRUKUJ</a>
                                </td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </div>
                    }
                <div class="text-center">
                    @if (!Model.Case.Status)
                    {
                        <input type="button" class="btnStyle" value="DODAJ PŁATNOŚĆ" style="width:auto; margin-top:20px;" />
                    }
                </div>
                </div>
            </div>
        </div>
    </div>
    
